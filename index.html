<!DOCTYPE html>
<html>
	<head>
		<title>apod</title>
		<meta charset="utf-8">
		<style>
			#button { font-size: 10px; }
			.center { text-align: center; }
			#heading { font-family:"Monaco", "Lucida Console",monospace; }
			#output { font-size: 18px }
		</style>
		<script type="text/javascript">
			const els = { };
			
			function range(min, max, step = 1) {
				return [...Array(
					Math.ceil((max - min) / step)
				).keys()]
					.map(n => n * step + min);
			}

			const diacritics = range(0x0300, 0x034A).map(String.fromCharCode).map(s => s.slice(0, 1));

			let converters = [
				{
					name: 'spoilers', 
					convert: s => s.split('').map(s => `||${s}||`).join('')
				},
				{
					name: 'word spoilers',
					convert: s => s.split(/ +/).map(s => `||${s}||`).join(' ')
				},
				{
					name: 'zalgo',
					convert: s => s.split('').map(s => {
						const added = [];
						for(let i = 0; i < 10; ++i) {
							added.push(diacritics[Math.floor(Math.random() * diacritics.length)]);
						}
						return `${s}${added.join('')}`;
					}).join('')
				},
				{
					name: 'spaced',
					convert: s => s.split('').map(s => `${s} `).join('')
				}
			];

			let selectedConverter = 0;

			// thanks to MrEgggga for making by code better :p
			function convertText() {
				const sentence = els.input.value;
				let alertMsg = null;
				if(sentence == '') {
					alertMsg = "Please type something in the box.";
				}
				const converted = converters[selectedConverter].convert(sentence);
				const convertedCut = converted.slice(0, els.maxLen.value || Infinity);

				if(converted != convertedCut) {
					alertMsg = "Message was too long.";
				}

				els.output.innerHTML = convertedCut;
				els.alerts.innerHTML = alertMsg || '';
			}
			function copyToClipboard() {
				let converted = document.getElementById('output').textContent;
				navigator.clipboard.writeText(converted);
			}
		</script>
	</head>
	<body>
		<div class="center">
			<h2 id="heading"> a.p.o.d. annoy people on discord</h2>

			<div>Annoyance method: <span id="conv-buttons"></span></div>
		
			<h3>input your text and copy</h3>
			<nobr>
				<p>Put text here â†“</p>
				<input id="input1" placeholder="input" type="text" onchange="convertText()"><br>
				<input id="maxlen" placeholder="max length" type="number"><br>
				<button onclick="convertText()"id="btn1">get output.</button>
			</nobr>
		
			<p>output: <span id="output"></span><span id="alert"></span></p>
			<button id="copytxt" onclick="copyToClipboard()">copy</button>

			<script type="text/javascript">
				els.input = document.getElementById("input1");
				els.output = document.getElementById("output");
				els.maxLen = document.getElementById("maxlen");
				els.alerts = document.getElementById("alert");
				els.buttonContainer = document.getElementById('conv-buttons');

				for(let i = 0; i < converters.length; ++i) {
					const button = document.createElement('BUTTON');
					button.addEventListener('click', () => {
						selectedConverter = i;
						convertText();
					});
					button.textContent = converters[i].name;
					els.buttonContainer.appendChild(button);
				}
			</script>
		</div>
		
	</body>
</html>
<!--CODIG-->
